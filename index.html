<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Aye Aye Api by AyeAyeApi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Aye Aye Api</h1>
      <h2 class="project-tagline">The RESTful API framework that works for you, not the other way around.</h2>
      <a href="https://github.com/AyeAyeApi/Api" class="btn">View on GitHub</a>
      <a href="https://github.com/AyeAyeApi/Api/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/AyeAyeApi/Api/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="aye-aye-api" class="anchor" href="#aye-aye-api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Aye Aye API</h1>

<p><a href="https://php.net/"><img src="https://img.shields.io/badge/php-%3E%3D%205.5-8892BF.svg" alt="PHP &gt;= 5.5"></a>
<a href="https://raw.githubusercontent.com/AyeAyeApi/Api/master/LICENSE.txt"><img src="https://img.shields.io/packagist/l/ayeaye/api.svg" alt="License: MIT"></a>
<a href="https://packagist.org/packages/ayeaye/api"><img src="https://img.shields.io/packagist/v/ayeaye/api.svg" alt="Version"></a>
<a href="https://travis-ci.org/AyeAyeApi/Api/branches"><img src="https://img.shields.io/travis/AyeAyeApi/Api/master.svg" alt="Build Status"></a></p>

<p>Aye Aye API is a micro framework for building API's written in PHP. It's designed to be easy to use, fast to
develop with and to scale from tiny micro-services to world devouring titans.</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<p>Create a project and include Aye Aye.</p>

<div class="highlight highlight-source-shell"><pre>composer init --require=<span class="pl-s"><span class="pl-pds">"</span>ayeaye/api ^1.0.0<span class="pl-pds">"</span></span> -n
composer install</pre></div>

<h2>
<a id="quick-start-guide" class="anchor" href="#quick-start-guide" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Quick Start Guide</h2>

<p>When working with Aye Aye, you will do almost all of your work in Controller classes.</p>

<p>Here's our ubiquitous Hello World controller:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// HelloWorldController.php</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">AyeAye\Api\Controller</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">class</span> <span class="pl-en">HelloWorldController</span> <span class="pl-k">extends</span> <span class="pl-e">Controller</span></span>
<span class="pl-s1">{</span>
<span class="pl-s1">    <span class="pl-c">/**</span></span>
<span class="pl-s1"><span class="pl-c">     * Yo ho ho</span></span>
<span class="pl-s1"><span class="pl-c">     * <span class="pl-k">@param</span> string $name Optional, defaults to 'Captain'</span></span>
<span class="pl-s1"><span class="pl-c">     * <span class="pl-k">@return</span> string</span></span>
<span class="pl-s1"><span class="pl-c">     */</span></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">getAyeAyeEndpoint</span>(<span class="pl-smi">$name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Captain<span class="pl-pds">'</span></span>)</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>Aye Aye <span class="pl-smi">$name</span><span class="pl-pds">"</span></span>;</span>
<span class="pl-s1">    }</span>
<span class="pl-s1">}</span></pre></div>

<p>Controllers contain endpoints and child controllers. The above controller has a single endpoint <code>hello</code> that will 
respond to HTTP GET requests. This is reflected in the name which takes the form <code>[verb][Name]Endpoint</code>.</p>

<p>The endpoint takes one parameter, <code>name</code>, which will default to <code>'Captain'</code> if not otherwise provided. The return is
a string.</p>

<p>The API needs an entry point, which will put in index.php</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// index.php</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">require_once</span> <span class="pl-s"><span class="pl-pds">'</span>../vendor/autoload.php<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1"><span class="pl-k">require_once</span> <span class="pl-s"><span class="pl-pds">'</span>HelloWorldController.php<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">AyeAye\Api\Api</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$initialController</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">HelloWorldController</span>();</span>
<span class="pl-s1"><span class="pl-smi">$api</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">Api</span>(<span class="pl-smi">$initialController</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$api</span><span class="pl-k">-&gt;</span>go()<span class="pl-k">-&gt;</span>respond();</span></pre></div>

<p>First we grab composer's autoloader, and our controller (which we haven't added to the autoloader). We instantiate our
HelloWorldController, and pass it into the constructor of our Api object. This becomes our initialController, and it's
the only one Aye Aye needs to know about, we'll come onto why later.</p>

<p>Finally the <code>-&gt;go()</code> method produces a Response object, with which we can <code>-&gt;respond()</code>.</p>

<p>We can test this using PHP's build in server:</p>

<div class="highlight highlight-source-shell"><pre>$ php -S localhost:8000 index.php <span class="pl-k">&amp;</span>

$ curl localhost:8000/aye-aye                 <span class="pl-c"># {"data":"Aye Aye Captain"}</span>
$ curl localhost:8000/aye-aye<span class="pl-k">?</span>name=Sandwiches <span class="pl-c"># {"data":"Aye Aye Sandwiches"}</span></pre></div>

<p>Notice how the string has been converted into a serialised object (JSON by default but the format can be selected with
an <code>Accept</code> header or a file suffix).</p>

<p>That tests our endpoint, but what happens if you just query the root of the Api.</p>

<div class="highlight highlight-source-shell"><pre>$ curl localhost:8000 <span class="pl-c"># {"data":{"controllers":[],"endpoints":{"get":{"aye-aye":{"summary":"Yo ho ho","parameters":{"name":{"type":"string","description":"Optional, defaults to 'Captain'"}},"returnType":["string"]}}}}} </span></pre></div>

<p>Lets take take a closer look at that returned string. </p>

<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>data<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>controllers<span class="pl-pds">"</span></span>: [],
    <span class="pl-s"><span class="pl-pds">"</span>endpoints<span class="pl-pds">"</span></span>: {
      <span class="pl-s"><span class="pl-pds">"</span>get<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>aye-aye<span class="pl-pds">"</span></span>: {
          <span class="pl-s"><span class="pl-pds">"</span>summary<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Yo ho ho<span class="pl-pds">"</span></span>,
          <span class="pl-s"><span class="pl-pds">"</span>parameters<span class="pl-pds">"</span></span>: {
            <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: {
              <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>,
              <span class="pl-s"><span class="pl-pds">"</span>description<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Optional, defaults to 'Captain'<span class="pl-pds">"</span></span>
            }
          },
          <span class="pl-s"><span class="pl-pds">"</span>returnType<span class="pl-pds">"</span></span>: [
            <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>
          ]
        }
      }
    }
  }
}</pre></div>

<p>As you can see, it is an explanation of how our controller is structured. We didn't write anything more than what was
expected of us, and it makes sense to both the back end developers, and the consumers of your Api.</p>

<p>Don't forget to close the server down when you're done.</p>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">fg</span>
^C</pre></div>

<h2>
<a id="why-should-you-use-it" class="anchor" href="#why-should-you-use-it" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Why should you use it?</h2>

<p>Developing in Aye Aye is simple, clean and logical. Aye Aye processes requests and gives them to the appropriate
endpoint on the appropriate controller. That endpoint is simply a method, that takes a set of parameters and returns
some data. Aye Aye will work out where to find those parameters in the request, and it will format the data on return. 
It even supports multiple data formats and will automatically switch based on what the user requests.</p>

<p>There's no fluff. You don't need to learn new database tools, or logging interfaces (assuming you know <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-3-logger-interface.md">PSR-3</a>, and you should) or
authentication methods. Aye Aye only provides routing, request parsing and response handling. You can use whatever
you like for the rest.</p>

<p>If you follow <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-4-autoloader.md">PSR-4</a>, then
your API will look a lot like your directory structure, making maintenance a breeze.</p>

<p>Aye Aye knows about itself. It knows what endpoints and what sub-controllers are available on any given controller, and
by reading the documentation in the doc-block comments, it can tell users what those end points do. You only need to 
write your documentation once, and Aye Aye will read it and tell your users what those end points do, and what
parameters they take.</p>

<p>By default it can read and write data as json (the default) and xml, though more formats can easily be added. It also
reads GET, POST and HEADER, and parametrises url slugs. Data from these sources is passed into your methods for you.</p>

<h2>
<a id="quick-start-explained" class="anchor" href="#quick-start-explained" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Quick Start explained</h2>

<p>The most important and powerful feature of Aye Aye is it's controllers. Controllers do two things. They provide
endpoints, and access to other controllers.</p>

<p>Controllers are classes that extend <code>AyeAye\Api\Controller</code></p>

<p>Endpoints are methods on the controllers that are named in this way <code>[verb][name]Endpoint(...)</code></p>

<ul>
<li>The <code>[verb]</code> is the http verb, the endpoint is waiting for.</li>
<li>The <code>[name]</code> is the name of the endpoint.</li>
<li>
<code>Endpoint</code> is literally the word "Endpoint". It helps us know what we're dealing with.</li>
</ul>

<p>You can define any parameters you like for the method, and Aye Aye will automatically populate them for you.</p>

<p>Controllers can also reference other controllers with methods named like this <code>[name]Controller()</code></p>

<p>These should return a controller object, and it's how Aye Aye navigates the Api.</p>

<h3>
<a id="the-hello-world-controller" class="anchor" href="#the-hello-world-controller" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The hello world controller</h3>

<p>Above we wrote a controller to say hello.</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// HelloWorldController.php</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">AyeAye\Api\Controller</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">class</span> <span class="pl-en">HelloWorldController</span> <span class="pl-k">extends</span> <span class="pl-e">Controller</span></span>
<span class="pl-s1">{</span>
<span class="pl-s1">    <span class="pl-c">/**</span></span>
<span class="pl-s1"><span class="pl-c">     * Yo ho ho</span></span>
<span class="pl-s1"><span class="pl-c">     * <span class="pl-k">@param</span> string $name Optional, defaults to 'Captain'</span></span>
<span class="pl-s1"><span class="pl-c">     * <span class="pl-k">@return</span> string</span></span>
<span class="pl-s1"><span class="pl-c">     */</span></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">getAyeAyeEndpoint</span>(<span class="pl-smi">$name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Captain<span class="pl-pds">'</span></span>)</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>Aye Aye <span class="pl-smi">$name</span><span class="pl-pds">"</span></span>;</span>
<span class="pl-s1">    }</span>
<span class="pl-s1">}</span></pre></div>

<p>The one method in this controller tells you everything you need to know.</p>

<ul>
<li>It will respond to a GET request send to the hello endpoint. </li>
<li>It takes one parameter, 'name', which will default to Captain</li>
<li>It returns a string</li>
</ul>

<p>So how did we go from that, to sending and receiving the data with curl?</p>

<p>When we created the Api object, we passed it a HelloWorldController object as a parameter, this tells the Api this is 
our starting point. The Aye Aye identifies getAyeEndpoint as an endpoint called "aye" that is triggered with a GET
request.</p>

<p>You'll notice that we used a PHP Doc Block to explain what the method does. This is <em>really</em> important. Not only does
it tell other developers what this end point does... it tells your API's users too, and they'll be using it in just the
same way.</p>

<p>In the quick start guide we queryied "/", and you will have seen that the Api tells you it has one GET endpoint,
called 'aye, that it takes one parameter, as string called name, and it described all of these things with the 
documentation you made for the method!</p>

<h3>
<a id="child-controllers" class="anchor" href="#child-controllers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Child Controllers</h3>

<p>Obviously just having one controller is pretty useless. To go from one controller to the next, we create a
<code>[name]Controller()</code> method. This method should return another object that extends Controller. To demonstrate that in
our application quick start application, we can just return <code>$this</code>.</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// HelloWorldController.php</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">AyeAye\Api\Controller</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">class</span> <span class="pl-en">HelloWorldController</span> <span class="pl-k">extends</span> <span class="pl-e">Controller</span></span>
<span class="pl-s1">{</span>
<span class="pl-s1">    <span class="pl-c">/**</span></span>
<span class="pl-s1"><span class="pl-c">     * Yo ho ho</span></span>
<span class="pl-s1"><span class="pl-c">     * <span class="pl-k">@param</span> string $name Optional, defaults to 'Captain'</span></span>
<span class="pl-s1"><span class="pl-c">     * @returns string</span></span>
<span class="pl-s1"><span class="pl-c">     */</span></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">getAyeAyeEndpoint</span>(<span class="pl-smi">$name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Captain<span class="pl-pds">'</span></span>)</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>Aye Aye <span class="pl-smi">$name</span><span class="pl-pds">"</span></span>;</span>
<span class="pl-s1">    }</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-c">/**</span></span>
<span class="pl-s1"><span class="pl-c">     * lol...</span></span>
<span class="pl-s1"><span class="pl-c">     * @returns $this</span></span>
<span class="pl-s1"><span class="pl-c">     */</span></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">ayeController</span>()</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-k">return</span> <span class="pl-smi">$this</span>;</span>
<span class="pl-s1">    }</span>
<span class="pl-s1">}</span></pre></div>

<p>Now when we start our application and the fun begins!</p>

<div class="highlight highlight-source-shell"><pre>$ php -S localhost:8000 public/index.php <span class="pl-k">&amp;</span>
curl localhost:8000/aye/aye/aye/aye/aye-aye<span class="pl-k">?</span>name=Aye%20Aye <span class="pl-c"># {"data":"Aye Aye Aye Aye"}</span></pre></div>

<h2>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributing</h2>

<p>Aye Aye is an Open Source project and contributions are very welcome.</p>

<h3>
<a id="issues" class="anchor" href="#issues" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Issues</h3>

<p>To report problems, please open an Issue on the <a href="https://github.com/AyeAyeApi/Api/issues">GitHub Issue Tracker</a>.</p>

<h3>
<a id="changes" class="anchor" href="#changes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Changes</h3>

<p>Send me pull requests. Send me lots of them.</p>

<p>We follow the <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md">PSR-1</a> and
<a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md">PSR-2</a> coding standards.
PHPMD and PHPCS, and their rule files will help guide you in this.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/AyeAyeApi/Api">Aye Aye Api</a> is maintained by <a href="https://github.com/AyeAyeApi">AyeAyeApi</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-73943600-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
